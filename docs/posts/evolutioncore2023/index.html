<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian O’Meara">
<meta name="dcterms.date" content="2023-05-11">
<meta name="description" content="Topics and teaching in our core class in evolution for graduate students">

<title>Brian O’Meara - Grad core class in evolutionary biology, 2023 edition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.27/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0.9000/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0.9000/js/crosstalk.min.js"></script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Brian O’Meara</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cv-etc." role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">CV, etc.</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cv-etc.">    
        <li>
    <a class="dropdown-item" href="../../cv.html">
 <span class="dropdown-text">CV</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../calendar.html">
 <span class="dropdown-text">Calendar</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../feedback.html">
 <span class="dropdown-text">Feedback</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../useful.html">
 <span class="dropdown-text">Useful links</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tenure.html">
 <span class="dropdown-text">Materials for promotion to associate (and tenure)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../promotion.html">
 <span class="dropdown-text">Materials for promotion to full</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../SSB.html">
 <span class="dropdown-text">Candidacy for SSB president</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../evol2023.html">
 <span class="dropdown-text">SSB Presidential Address 2023</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lab" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lab</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lab">    
        <li>
    <a class="dropdown-item" href="../../personnel.html">
 <span class="dropdown-text">People</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../guidelines.html">
 <span class="dropdown-text">Guidelines &amp; Recommendations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../location.html">
 <span class="dropdown-text">Location/Contact</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../opportunities.html">
 <span class="dropdown-text">Opportunities</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../learningobjectives.html">
 <span class="dropdown-text">Learning objectives</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../better-letter.html">
 <span class="dropdown-text">BetterLetter</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../shouldyougotogradschool.html">
 <span class="dropdown-text">Should you go to grad school to be a professor?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tenure.html">
 <span class="dropdown-text">Materials for promotion to associate (and tenure)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../promotion.html">
 <span class="dropdown-text">Materials for promotion to full</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../general.html">
 <span class="dropdown-text">Info for general public</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../covid.html">
 <span class="dropdown-text">COVID</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../schedule.html">
 <span class="dropdown-text">EEB scheduling</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teaching">    
        <li>
    <a class="dropdown-item" href="../../teaching.html">
 <span class="dropdown-text">Teaching overall</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../eeb464.html">
 <span class="dropdown-text">Macroevolution (EEB464)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://phylometh.info/">
 <span class="dropdown-text">Phylogenetic Methods</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutorials" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tutorials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutorials">    
        <li>
    <a class="dropdown-item" href="../../aic.html">
 <span class="dropdown-text">AIC</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../phylogenetics.html">
 <span class="dropdown-text">Phylogenetics</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Blog</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-blog">    
        <li>
    <a class="dropdown-item" href="../../blog.html">
 <span class="dropdown-text">Blog</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../blog.xml">
 <span class="dropdown-text">RSS feed</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Grad core class in evolutionary biology, 2023 edition</h1>
                  <div>
        <div class="description">
          Topics and teaching in our core class in evolution for graduate students
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">teaching</div>
                <div class="quarto-category">evolution</div>
                <div class="quarto-category">core</div>
                <div class="quarto-category">EEB511</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Brian O’Meara </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 11, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overall-topics-covered" id="toc-overall-topics-covered" class="nav-link active" data-scroll-target="#overall-topics-covered"><span class="header-section-number">1</span> Overall topics covered</a></li>
  <li><a href="#sec-accessibility" id="toc-sec-accessibility" class="nav-link" data-scroll-target="#sec-accessibility"><span class="header-section-number">2</span> Accessibility</a></li>
  <li><a href="#sec-programming" id="toc-sec-programming" class="nav-link" data-scroll-target="#sec-programming"><span class="header-section-number">3</span> Programming</a>
  <ul class="collapse">
  <li><a href="#sec-r" id="toc-sec-r" class="nav-link" data-scroll-target="#sec-r"><span class="header-section-number">3.1</span> R</a></li>
  <li><a href="#sec-python" id="toc-sec-python" class="nav-link" data-scroll-target="#sec-python"><span class="header-section-number">3.2</span> Python</a></li>
  </ul></li>
  <li><a href="#sec-jargon" id="toc-sec-jargon" class="nav-link" data-scroll-target="#sec-jargon"><span class="header-section-number">4</span> Jargon</a></li>
  <li><a href="#things-to-change" id="toc-things-to-change" class="nav-link" data-scroll-target="#things-to-change"><span class="header-section-number">5</span> Things to change</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Our department has long had a core class: one semester on ecology, one on evolution. It originated before I started here (it was somewhat modeled on UC Davis Population Biology’s core class, which I took as a student, in fact), but I’ve taught parts of it (usually a few weeks on phylogenetics and macroevolution) nearly every year I’ve been here. This year, I took over as the instructor for the evolution semester. Years ago the course was largely team taught with perhaps four or five instructors per semester; over time, this has winnowed down. I chose to do it as the sole instructor, with one guest discussion with Dr.&nbsp;Nina Fefferman on getting grants (she’s <a href="http://feffermanlab.org/funding.html">very good</a> at it), as the students wanted to have a discussion on this.</p>
<p>This course is described as “Readings, lectures, and discussion about key concepts in evolution.” In practice, it has several goals:</p>
<ol type="1">
<li>Replace the evolution written exam that was formerly part of qualifying exams (so quals can now focus just on the research project itself). This necessitates broad coverage and robust assessments of knowledge.</li>
<li>Make students fluent in evolutionary thought: students emerging with a Masters or PhD in an ecology and evolutionary biology department should be able to talk about genetic drift, the Modern Synthesis, speciation, and more to people studying evolution, even if the students specialize on some other aspect of science and come with a very different background.</li>
<li>Help students understand how evolution science is done. “Science” is a corpus of knowledge (“the mitochondrion is the powerhouse of the cell”) and is often presented as this in undergraduate courses, but it is also a way to get this knowledge. Students will learn how we gain knowledge in evolution.</li>
<li>Onboarding to the department. This is a particular set of people, assembled with care and at great expense: how to thrive in the department, who people are, etc.</li>
</ol>
<p>Course structure was based on particular topics, with students typically given a paper or two to read and ask questions about, then work through the topic and questions in class (lots of think-pair-share, class questions, etc.). Students asked for more structure, so I started adding basic slides to give broader overviews of the topics and giving sample final exam questions for each topic so they could better understand the type of depth of knowledge I was expecting them to get.</p>
<p>Often this sort of course covers a lot of history of the field, famous scientists, and the like. I focused instead on current understandings of the topics. This aligns with the course description (“key concepts in evolution”) but I argue that it’s more important for students who are doing their own research: what do we know, and what is still left to learn, rather than who thought what in 1968. That said, there is still vocab people should know in the field, including names of people and organisms, as well as local info (faculty members, Scopes trial, and similar), so I made a <a href="Jargonfest.csv">list of jargon (.csv)</a>, see also <a href="#sec-jargon" class="quarto-xref">Section&nbsp;4</a>, and had some multiple choice quizzes and part of the final to encourage students to learn about these terms.</p>
<section id="overall-topics-covered" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="overall-topics-covered"><span class="header-section-number">1</span> Overall topics covered</h2>
<ul>
<li>Jan 24 Intro</li>
<li>Jan 26 Effective population size: <a href="https://doi.org/10.1038/nrg2526">Charlesworth (2009)</a></li>
<li>Jan 31 Adaptation: <a href="http://dx.doi.org/10.1016/j.tree.2016.12.005">Kokko et al.&nbsp;(2017)</a></li>
<li>Feb 2 Spandrels: <a href="https://doi.org/10.1098/rspb.1979.0086">Gould &amp; Lewontin (1979)</a></li>
<li>Feb 7 Neutral theory I: <a href="https://doi.org/10.1146/annurev-genom-082908-150129">Nei et al.&nbsp;(2010, pages 265-274)</a></li>
<li>Feb 9 Neutral theory II: <a href="https://doi.org/10.1146/annurev-genom-082908-150129">Nei et al.&nbsp;(2010, pages 274-289)</a></li>
<li>Feb 14 R (see <a href="#sec-r" class="quarto-xref">Section&nbsp;3.1</a>)</li>
<li>Feb 16 Python (see <a href="#sec-python" class="quarto-xref">Section&nbsp;3.2</a>)</li>
<li>Feb 21 Game theory: <a href="https://doi.org/10.1146/annurev.es.14.110183.002113">Riechert &amp; Hammerstein (1984)</a> [UTK author]</li>
<li>Feb 23 Quantitative genetics and evolvabililty: <a href="https://doi.org/10.1146/annurev-ecolsys-011121-021241">Hansen &amp; Pélabon (2021)</a></li>
<li>Feb 28 Sexual selection I: <a href="https://doi.org/10.1126/science.abi6308">Rosenthal &amp; Ryan (2022)</a></li>
<li>Mar 2 Sexual selection II: <a href="https://doi.org/10.1007/978-94-017-9585-2_5">Roughgarden (2015)</a></li>
<li>Mar 7 Species concepts: <a href="https://repository.si.edu/handle/10088/4652">de Queiroz (1998)</a></li>
<li>Mar 9 Species delimitation: <a href="https://doi.org/10.1093/sysbio/syw100">Morales et al (2016)</a> [UTK coauthor; COI]</li>
<li>Mar 21 Bayesian, maximum likelihood, and phylogenetics: <a href="https://doi.org/10.1016/s0169-5347(00)02025-5">Lewis (2001)</a></li>
<li>Mar 23 Phylogenetics discrete characters: <a href="https://doi.org/10.1146/annurev-ecolsys-110411-160331">O’Meara (2012)</a> [UTK author; COI]</li>
<li>Mar 28 Phylogenetics utility: slides for this</li>
<li>Mar 30 Work session for students to study and figure out questions</li>
<li>Apr 4 Phylogenetics continuous models: slides, also paper above.</li>
<li>Apr 11 Diversification: <a href="https://doi.org/10.1016/j.tree.2007.06.013">Ricklefs (2007)</a></li>
<li>Apr 14 Timeline of life: <a href="https://www.newscientist.com/article/dn17453-timeline-the-evolution-of-life/" class="uri">https://www.newscientist.com/article/dn17453-timeline-the-evolution-of-life/</a></li>
<li>Apr 18 Biogeography: <a href="https://doi.org/10.1007/s12052-012-0421-2">Sanmartín (2012)</a></li>
<li>Apr 20 Paleontology: <a href="https://doi.org/10.1146/annurev-ecolsys-110617-062638">Stigall (2019)</a> [UTK author]</li>
<li>Apr 25 Evolution of behavior: <a href="https://doi.org/10.1146/annurev-ecolsys-110218-025040">Whiten (2019)</a></li>
<li>Apr 27 EvoDevo: <a href="https://doi.org/10.1146/annurev-cellbio-101011-155732">Mallarino &amp; Abzhanov (2012)</a></li>
<li>May 2 Grants (with Dr.&nbsp;Nina Fefferman)</li>
<li>May 4 Eugenics: <a href="https://www.ashg.org/wp-content/uploads/2023/01/Facing_Our_History-Building_an_Equitable_Future_Final_Report_January_2023.pdf">“Facing our History – Building an Equitable Future” by American Society of Human Genetics, page 5-15</a> and <a href="https://www.nytimes.com/2022/06/08/magazine/eugenics-movement-america.html?unlocked_article_code=Yd0N6bRMTs9hkiFQjlNyB5EYekKtNRfbRxktfpFMCF_IbOUR5SeUjL0wEYaloYcd4LfTIKspaC31l8N7flxkVtM8NsLmR36mM_0wfoUPGOit7Cxvn-2yd1SUUGplzyIuXlNRylugiCqAC6tDwoA7feN7ILjzA_DHXO6H-JdLmjZUGhgsdxmo4dMy8Y-t2PG1n7GjSO33NofeAVTh4tGOcqLCttGWVo04KPwEDP2oFCyt_UFyPHvz-rKSEx8V2kze-43rjIUOsRL2B5OIkRw452JxvUAl5qRSdu6UcJ-nfTo1AiDu0Vu97NsG_CD8jYmWwegZH6CkXd_VYbuGtGIm-EEydtQ&amp;smid=url-share">Villarosa (2019)</a></li>
<li>May 9 Human evolution: <a href="https://doi.org/10.1038/s41586-021-03244-5">Bergström et al.&nbsp;(2021)</a></li>
</ul>
<p>Given the audience (a course like this is varied: some are students with a Masters degree in evolution, some have had very little biology and come from fields like linguistics, math, or geography), slightly more than half the articles are reviews, while others are particular studies that illustrate what a field can be. I tried to focus discussions on helping with confusing concepts and then talking about why this area of research and its questions can matter. I worked to pull from authors from a variety of backgrounds and perspectives; I’ll be continuing to revisit the set of papers used in the class in the future (and suggestions welcome!).</p>
</section>
<section id="sec-accessibility" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="sec-accessibility"><span class="header-section-number">2</span> Accessibility</h2>
<p>Some steps I took to attempt to help with accessibility:</p>
<ul>
<li>PowerPoint live captioning is great: even when the slide show part of a class was done, I’d leave it open and running so that people can see what is being said</li>
<li>The class was in person, but I always had a zoom stream going. No more than one or two students used it at a time, but it still gave flexibility for those who needed it.</li>
<li>I used clear N95 masks: <a href="https://optrel.us/product/p-air-clear-n95-masks-20-pack/" class="uri">https://optrel.us/product/p-air-clear-n95-masks-20-pack/</a>. They’re more expensive than the regular masks, but they let students see my lips while giving me and them some degree of protection.</li>
<li>Quizzes and tests are not timed (other than a deadline to turn them in, days after they were made available)</li>
</ul>
</section>
<section id="sec-programming" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sec-programming"><span class="header-section-number">3</span> Programming</h2>
<p>We spent one week on programming. My goal was to have students get a bit of exposure and get over initial fear: they’re not going to be writing packages after a week, but they’ll know some of how this all works, that error messages are normal, how to get help, how to start using R and python, etc.</p>
<section id="sec-r" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="sec-r"><span class="header-section-number">3.1</span> R</h3>
<p>I made an exercise at <a href="https://github.com/bomeara/geewhizR" class="uri">https://github.com/bomeara/geewhizR</a>, focused on this Rmarkdown file (<a href="https://github.com/bomeara/geewhizR/blob/main/main.Rmd" class="uri">https://github.com/bomeara/geewhizR/blob/main/main.Rmd</a>) for students to download; we worked through it in class. You can see it rendered fully here as a <a href="main.pdf">pdf</a>. Some of the basic concepts I wanted them to learn:</p>
<ul>
<li>Rmarkdown for reproducibility and keeping things organized</li>
<li>Installing and loading packages</li>
<li>The importance of actually looking at datasets (using <a href="https://blog.revolutionanalytics.com/2017/05/the-datasaurus-dozen.html">datasaurus</a>)</li>
<li>Getting information from online sources like GBIF, iNaturalist, and Datelife</li>
<li>Making maps</li>
</ul>
<p>The script does all this and gives them something to build from. I also gave them links to these resources:</p>
<ul>
<li><a href="https://swirlstats.com/" class="uri">https://swirlstats.com/</a>: good way to learn basic R</li>
<li><a href="https://posit.co/resources/cheatsheets/" class="uri">https://posit.co/resources/cheatsheets/</a>: summaries of functions in popular packages</li>
<li><a href="https://cran.r-project.org/web/views/" class="uri">https://cran.r-project.org/web/views/</a>: overviews of packages in particular domains. Phylogenetics can be particularly useful</li>
<li><a href="https://adv-r.hadley.nz/" class="uri">https://adv-r.hadley.nz/</a>: free online R textbook</li>
<li><a href="https://rmarkdown.rstudio.com/" class="uri">https://rmarkdown.rstudio.com/</a>: Rmarkdown, a way to combine code and text</li>
<li><a href="https://quarto.org/" class="uri">https://quarto.org/</a>: The successor to Rmarkdown; works better with both python and R</li>
<li><a href="https://books.ropensci.org/targets/" class="uri">https://books.ropensci.org/targets/</a>: a package for doing complex workflows</li>
</ul>
</section>
<section id="sec-python" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="sec-python"><span class="header-section-number">3.2</span> Python</h3>
<p>I’ve barely used any python so far (I’m heavily invested in the R ecosystem) but it’s worth having students learn it: it’s especially important in genomics and machine learning. I thought showing them how to do machine learning could be useful, including having them viscerally feel the issues that could come from image classification. For a sample problem, since I had shown them a local salamander in the R tutorial, and they were interested, I suggested solving a problem of using machine learning to assess whether a sampled individual was a juvenile or adult (<a href="https://www.inaturalist.org/taxa/27805-Notophthalmus-viridescens/browse_photos"><em>Notophthalmus viridescens</em>, the Eastern Newt</a>) – sort of an “awesome, I can see how this could scale up for my research” inspiration. Thus, I made this exercise (<a href="https://github.com/bomeara/geewhizPython" class="uri">https://github.com/bomeara/geewhizPython</a>), especially this sample script (<a href="https://github.com/bomeara/geewhizPython/blob/main/salamander.py" class="uri">https://github.com/bomeara/geewhizPython/blob/main/salamander.py</a>). I wanted them to learn:</p>
<ul>
<li>Installing python libraries</li>
<li>How to import from python libraries</li>
<li>How to point to a folder (directory)</li>
<li>How to do machine learning with a training and testing dataset</li>
<li>How to pull in information from iNaturalist</li>
<li>Possibilities and problems with machine learning results</li>
</ul>
<p>Some of the other resources I pointed them to:</p>
<ul>
<li><a href="https://pyinaturalist.readthedocs.io/en/stable/examples/Tutorial_1_Observations.html" class="uri">https://pyinaturalist.readthedocs.io/en/stable/examples/Tutorial_1_Observations.html</a>: the pyinaturalist Python package for using iNaturalist data</li>
<li><a href="https://keras.io" class="uri">https://keras.io</a>: for machine learning in general</li>
<li><a href="https://www.tensorflow.org" class="uri">https://www.tensorflow.org</a>: for a very popular machine learning framework</li>
<li><a href="https://www.anaconda.com/products/distribution" class="uri">https://www.anaconda.com/products/distribution</a>: Anaconda for making isolated python environments</li>
<li><a href="https://jupyter.org" class="uri">https://jupyter.org</a>: Jupyter notebooks (like Rmarkdown, but for python, and often working online)</li>
<li><a href="https://colab.research.google.com" class="uri">https://colab.research.google.com</a>: Google colab, for running python on the web (though consider long term stability: <a href="https://killedbygoogle.com" class="uri">https://killedbygoogle.com</a>)</li>
<li><a href="https://en.wikipedia.org/wiki/Weapons_of_Math_Destruction" class="uri">https://en.wikipedia.org/wiki/Weapons_of_Math_Destruction</a>: Overview of a book on how algorithms can cause harm (and there’s been a lot more work on this topic since)</li>
<li><a href="https://diffusionbee.com" class="uri">https://diffusionbee.com</a>: An application for making AI art</li>
<li><a href="https://en.wikipedia.org/wiki/Stable_Diffusion" class="uri">https://en.wikipedia.org/wiki/Stable_Diffusion</a>: Stable Diffusion, an AI for making art</li>
<li><a href="https://chat.openai.com/chat" class="uri">https://chat.openai.com/chat</a>: ChatGPT, an engine that can respond to prompts in various ways, including suggesting code.</li>
</ul>
</section>
</section>
<section id="sec-jargon" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="sec-jargon"><span class="header-section-number">4</span> Jargon</h2>
<p>This can be downloaded as a <a href="Jargonfest.csv">csv file</a>.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-dd5000d92242385f90c8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-dd5000d92242385f90c8">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419"],["adaptation","adaptive landscape","arms race","artificial selection","asexual reproduction","Batesian mimicry","biological constraints","Brownian motion","census population size","central dogma","coadaptation","coevolution","colonization","commensalism","cytoplasmic isolation","dispersal","Dobzhansky-Muller model","dynamic equilibrium","ecological niche","effective population size","endemism","endosymbiosis","ethology","evolutionary medicine","extant","fitness","iteroparity","K-strategy","lek","logistic growth","LUCA","negative selection","neontology","niche","NP-hard","phenotype","phylogeography","population","postzygotic isolating mechanism","prezygotic isolating mechanism","R-strategy","r/K selection","reinforcement","semelparity","sexual dimorphism","sexual selection","social Darwinism","survival of the fittest","theory","urban evolution","zygote","allometry","evo-devo","ontogeny","altruism","alternative splicing","assortative mating","backcrossing","bottleneck","Breeder's equation","canalization","candidate gene","cis-regulatory element","cline","coalescent","codon","codon usage bias","constitutive expression","crossing over","degeneracy of genetic code","dominant","dosage compensation","epigenetics","epistasis","exon","facultative expression","fixation (of alleles)","founder effect","frameshift mutation","frequency-dependent selection","G matrix","gamete","gene","gene dosage","gene drive","gene duplication","gene flow","gene pool","generation time","genetic distance","genetic drift","genetic hitchhiking","genetic load","genetic marker","genomic imprinting","genotype","germ line","haplodiploidy","Hardy-Weinberg principle","hemizygous","heredity","heritability","heterogametic sex","heterosis","homozygous","hox genes","hybrid","hybrid inviability","hybrid swarm","hybrid zone","identical by descent","identical by state","inbreeding depression","indel","intergenic region","intragenomic conflict","introgression","intron","isolation by distance","junk DNA","karyotype","kin selection","linkage disequilibrium","maternal effect","meiosis","Mendelian inheritance","migration","missense mutation","mitosis","Moran process","mutation","mutation rate","N_e","nearly neutral theory","neutral mutation","neutral theory","non-Mendelian inheritance","nonsense mutation","ortholog","panmixia","point mutation","polymorphism","polyploidy","positive selection","psuedogene","Punnett square","quantitative genetics","random mating","reaction norm","recessive","recombination","runaway sexual selection","secondary contact","selection coefficient","selective pressure","selective sweep","selfish genetic element","sex chromosome","stabilizing selection","trans-regulatory element","transcription","translation","wild type","Wright-Fisher process","X-linked gene","Y-linked gene","Alfred Russel Wallace","Alfred Wegener","Austin Peay","Ben Fitzpatrick","Beth Schussler","Brandon Matheny","Carl Woese","Carolus Linnaeus","Charles Darwin","Charles Lyell","Clarence Darrow","Dan Simberloff","Ed Schilling","Elisabeth Vrba","EO Wilson","Ernst Mayr","G. Ledyard Stebbins","George Gaylord Simpson","Gregor Mendel","Henreitte Jager","JBS Haldane","Jean-Baptiste Lamark","Jen Schweitzer","Jessica Budke","Jessie Tanner","Jim Fordyce","Joe Bailey","Joe Williams","John Edmonstone","John Maynard Smith","John Scopes","Julian Huxley","Karen Hughes","Kimberly Sheldon","Laura Russo","Leigh Van Valen","Liz Derryberry","Lynn Margulis","Mary Anning","Michael Gilchrist","Mona Papeş","Montgomery Slatkin","Motoo Kimura","Muller's ratchet","Nina Fefferman","Orou Gaoue","Paul Armsworth","Randy Small","Richard Dawkins","Richard Lewontin","Richard Owen","Ronald Fisher","Rosemary &amp; Peter Gillespie","Sebastian Stockmaier","Sergey Gavrilets","Sewall Wright","Stephanie Kivlin","Steven J. Gould","Theodosius Dobzhansky","Thomas Malthus","Udny Yule","Xingli Giam","Butler Act","Gary Scott","who won the Scopes trial","William Jennings Bryan","adaptationalism","adaptive radiation","allochronic speciation","allopatric speciation","anagenesis","ancestral trait","apomorphy","aptation","background extinction rate","biogeography","biological species concept","Burgess shale","Cambrian explosion","character displacement","chronospecies","cladistics","cladogenesis","comparative methods","continental drift","convergent evolution","Cope's rule","crown group","cryptic species","Deccan traps","derived trait","disruptive seelction","End-Permian extinction","eugenics","evolutionary arms race","exaptation","extinction","extinction rate","fossil record","geologic time scale","ghost lineages","Gondwana","gradualism","Great oxidation event","green beard","group selection","Haldane's rule","Hamilton's Rule","homology","homoplasy","inclusive fitness","island biogeography","island model","isolating mechanism","KT extinction","land bridge","Laurasia","left wall of minimal complexity","mating system","mechanical isolation","meme","mimicry","Modern Synthesis","MRCA","Müllerian mimicry","multifurcation","mutualism","natural selection","net diversification rate","non-independence","outgroup","paleontology","Pangaea","parallel evolution","parapatric speciation","paraphyly","parasitism","parsimony","parthenogenisis","peripatric speciation","phenetics","phylogeny","plesiomorphy","polyphyly","punctuated equilibrium","recapitulation","Red queen hypothesis","refugium","reproductive isolation","reticulate evolution","ring species","RNA world","saltation","spandrel","speciation","speciation rate","species selection","species sorting","stag hunt","stem group","sympatric speciation","symplesiomorphy","synapomorphy","taphonomic bias","taxon","trait","turnover rate","variance","vestigial","vicariance","vicariance biogeography","virulence","allele","allele frequency","Acromyrmex","Amborella","Amborella","ammonite","angiosperm","Anolis","Anolis","Anomalocaris","Archaea","bdelloid rotifers","bonobo","brachiopod","Buchnera","crinoid","Darwin's finches","diatoms","Dimetrodon","Dionaea muscipula","Ediacaran fauna","eubacteria","fig wasp","Gasterosteus aculeatus","Geospizinae","gingko","Hawaiian honeycreepers","HIV","Ichthyornis dispar","isopod","lycophytes","Maiasaura","Plasmodium","red panda","rift lake cichlids","silversword","spiny anteater","Strepsiptera","Thermus aquaticus","Tiktaalik","Tribolium","trilobite","tunicates","Welwischia","Wolbachia","16S","amber fossil","approximate Bayesian computation","Bayes rule","Bayesianism","binomial nomenclature","BLAST","body fossil","bootstrap","chloroplast DNA","CRISPR","fossil","frequentist","holotype","impression fossil","in silico","in situ","in vivo","inbred line","independent contrasts","likelihood","microsatellites","mitochondrial DNA","molecular clock","NCBI","neotype","nuclear DNA","paratype","PCR","posterior","prior","Robert FitzRoy","rock strata","Sanger sequencing","SNP","type specimen"],["general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","general","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","microevolution","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","people","local interest","local interest","local interest","local interest","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","macroevolution","microevolution","microevolution","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","organism","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools","tools"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Term<\/th>\n      <th>Type<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="things-to-change" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="things-to-change"><span class="header-section-number">5</span> Things to change</h2>
<p>Assuming I teach this again in 2024, some of the things I’d like to change:</p>
<ul>
<li>Continued revision of chosen papers: most worked ok, but some got in too much depth; also broader sampling of the literature</li>
<li>More use of overview slides early in the course</li>
<li>More frequent assessments: this could help students self-assess their knowledge over time</li>
<li>Encourage more evenness of classroom participation: everyone contributed, but the evenness could be improved</li>
<li>Add more contemporary human evolution, like the Framingham heart study</li>
<li>Other things students will suggest via their feedback forms</li>
</ul>
<hr>
<p>To subscribe, go to <a href="https://brianomeara.info/blog.xml" class="uri">https://brianomeara.info/blog.xml</a> in an RSS reader.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{o'meara2023,
  author = {O’Meara, Brian},
  title = {Grad Core Class in Evolutionary Biology, 2023 Edition},
  date = {2023-05-11},
  url = {https://brianomeara.info/posts/evolutioncore2023},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-o'meara2023" class="csl-entry quarto-appendix-citeas" role="listitem">
O’Meara, Brian. 2023. <span>“Grad Core Class in Evolutionary Biology,
2023 Edition.”</span> May 11, 2023. <a href="https://brianomeara.info/posts/evolutioncore2023">https://brianomeara.info/posts/evolutioncore2023</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>